name: Problemas de Cronograma
description: Relatar conflitos de hor√°rio ou problemas de agendamento
title: "[CRONOGRAMA] "
labels: ["bug", "cronograma", "copilot-ready"]
assignees: []
body:
  - type: markdown
    attributes:
      value: |
        ## üìÖ Problemas de Cronograma e Hor√°rios
        
        Use este formul√°rio para relatar conflitos de hor√°rio, problemas de agendamento ou inconsist√™ncias no cronograma das atividades.

  - type: dropdown
    id: problem-type
    attributes:
      label: Tipo de Problema de Cronograma
      description: Qual √© o problema principal?
      options:
        - Duas atividades no mesmo hor√°rio/local
        - Professor designado para m√∫ltiplas atividades simult√¢neas
        - Hor√°rio da atividade est√° incorreto
        - Atividade n√£o aparece no cronograma
        - Dias da semana incorretos
        - Conflito com hor√°rio de aulas regulares
        - Outros problemas de agendamento
    validations:
      required: true

  - type: input
    id: primary-activity
    attributes:
      label: Atividade Principal Afetada
      description: Nome da atividade que est√° com problema de hor√°rio
      placeholder: ex. Clube de Xadrez
    validations:
      required: true

  - type: input
    id: conflicting-activity
    attributes:
      label: Atividade em Conflito (se aplic√°vel)
      description: Nome da segunda atividade que est√° em conflito
      placeholder: ex. Aula de Programa√ß√£o

  - type: input
    id: current-schedule
    attributes:
      label: Hor√°rio Atual Problem√°tico
      description: Hor√°rio e dias que est√£o causando problemas
      placeholder: ex. Ter√ßas e Quintas, 14:30-16:00
    validations:
      required: true

  - type: input
    id: teacher-affected
    attributes:
      label: Professor Afetado (se aplic√°vel)
      description: Nome de usu√°rio do professor envolvido no conflito
      placeholder: ex. mrodriguez

  - type: textarea
    id: problem-description
    attributes:
      label: Descri√ß√£o Detalhada do Problema
      description: Explique exatamente qual √© o conflito ou problema
      placeholder: |
        Exemplo: "O Clube de Xadrez e a Aula de Programa√ß√£o est√£o marcados para o mesmo hor√°rio (Ter√ßas 14:30-16:00) e ambos t√™m o professor Rodriguez como respons√°vel. Isso est√° impedindo que os alunos se inscrevam adequadamente."
      rows: 4
    validations:
      required: true

  - type: input
    id: preferred-schedule
    attributes:
      label: Hor√°rio Desejado/Sugerido
      description: Qual seria o hor√°rio ideal para resolver o conflito?
      placeholder: ex. Ter√ßas 16:00-17:30

  - type: checkboxes
    id: suggested-days
    attributes:
      label: Dias da Semana Desejados (se aplic√°vel)
      description: Marque os dias ideais para a atividade
      options:
        - label: Segunda-feira
        - label: Ter√ßa-feira
        - label: Quarta-feira
        - label: Quinta-feira
        - label: Sexta-feira
        - label: S√°bado
        - label: Domingo

  - type: dropdown
    id: flexibility
    attributes:
      label: Flexibilidade de Hor√°rio
      description: O qu√£o flex√≠vel √© para mudan√ßas de hor√°rio?
      options:
        - Muito flex√≠vel - qualquer hor√°rio funciona
        - Flex√≠vel - alguns hor√°rios funcionam
        - Pouco flex√≠vel - poucos hor√°rios funcionam
        - Inflex√≠vel - hor√°rio deve ser espec√≠fico
    validations:
      required: true

  - type: textarea
    id: constraints
    attributes:
      label: Restri√ß√µes e Limita√ß√µes
      description: H√° alguma limita√ß√£o espec√≠fica (equipamentos, salas, etc.)?
      placeholder: |
        Ex: "Precisa ser no laborat√≥rio de inform√°tica", "Professor s√≥ est√° dispon√≠vel nas tardes", "N√£o pode coincidir com hor√°rio de educa√ß√£o f√≠sica"
      rows: 3

  - type: dropdown
    id: impact-level
    attributes:
      label: N√≠vel de Impacto
      description: Qual o impacto atual deste problema?
      options:
        - Baixo - Inconveniente mas ainda funciona
        - M√©dio - Est√° causando confus√£o
        - Alto - Est√° impedindo funcionalidade
        - Cr√≠tico - Sistema inutiliz√°vel para agendamento
    validations:
      required: true

  - type: checkboxes
    id: affected-areas
    attributes:
      label: √Åreas Afetadas
      description: Que partes do sistema est√£o sendo impactadas?
      options:
        - label: Inscri√ß√£o de alunos
        - label: Visualiza√ß√£o do cronograma
        - label: Notifica√ß√µes/lembretes
        - label: Relat√≥rios de atividades
        - label: Sistema de presen√ßa
        - label: Outros

  - type: dropdown
    id: urgency
    attributes:
      label: Urg√™ncia para Resolu√ß√£o
      description: Quando este problema precisa ser resolvido?
      options:
        - Baixa - Pode aguardar (mais de 1 semana)
        - M√©dia - Pr√≥xima semana
        - Alta - Pr√≥ximos dias
        - Urgente - Hoje/amanh√£
    validations:
      required: true

  - type: textarea
    id: additional-info
    attributes:
      label: Informa√ß√µes Adicionais
      description: Qualquer outra informa√ß√£o relevante sobre o problema de cronograma
      placeholder: Contexto adicional, solu√ß√µes tentadas, observa√ß√µes...
      rows: 3

  - type: markdown
    attributes:
      value: |
        ## ‚úÖ Crit√©rios de Aceita√ß√£o (preenchido automaticamente)
        
        **Para o agente de codifica√ß√£o:**
        
        - [ ] Identificar conflitos espec√≠ficos no cronograma
        - [ ] Verificar l√≥gica de detec√ß√£o de conflitos
        - [ ] Validar m√©todo `findByDayAndTimeRange()` funciona corretamente
        - [ ] Checar se professor pode ter m√∫ltiplas atividades simult√¢neas
        - [ ] Implementar ou corrigir valida√ß√£o de conflitos
        - [ ] Atualizar hor√°rios conforme sugerido (se vi√°vel)
        - [ ] Testar que conflitos s√£o detectados e prevenidos
        - [ ] Verificar que mudan√ßas n√£o criam novos conflitos
        - [ ] Validar que interface mostra hor√°rios corretos
        - [ ] Testar queries de busca por hor√°rio funcionam
        
        ## üîß Dicas de Implementa√ß√£o
        
        **Para o desenvolvedor:**
        1. Examine `ScheduleDetails` value object e seus m√©todos
        2. Verifique `ActivityRepository.findByDayAndTimeRange()`
        3. Implemente valida√ß√£o de conflitos em `ActivityUseCase`
        4. Considere m√©todo para `findConflictingActivities()`
        5. Valide overlaps de hor√°rio: `LocalTime.isBefore()` e `isAfter()`
        6. Cheque se mesmo professor em m√∫ltiplas atividades simult√¢neas
        7. Use `Activity.getAssignedTeacherUsernames()` para verificar professores
        
        ## üìã Contexto T√©cnico
        
        - Value Object: `ScheduleDetails` com `List<String> days` e `LocalTime`
        - Queries: `findByDay()`, `findByTimeRange()`, `findByDayAndTimeRange()`
        - Valida√ß√£o: Comparar `startTime` e `endTime` entre atividades
        - Conflitos: Mesmos dias E hor√°rios sobrepostos
        - Professor: Verificar via `assignedTeacherUsernames` list
        - Frontend: Cronograma visual deve refletir mudan√ßas