name: Altera√ß√µes em Atividade Existente
description: Solicitar modifica√ß√µes em uma atividade j√° criada
title: "[ALTERAR ATIVIDADE] "
labels: ["enhancement", "modificacao-atividade", "copilot-ready"]
assignees: []
body:
  - type: markdown
    attributes:
      value: |
        ## ‚úèÔ∏è Solicita√ß√£o de Altera√ß√£o em Atividade
        
        Use este formul√°rio para solicitar modifica√ß√µes em uma atividade extracurricular j√° existente.
        Especifique claramente quais mudan√ßas s√£o necess√°rias.

  - type: input
    id: activity-name
    attributes:
      label: Nome da Atividade a Ser Modificada
      description: Nome exato da atividade como aparece atualmente no sistema
      placeholder: ex. Clube de Xadrez, Aula de Programa√ß√£o
    validations:
      required: true

  - type: checkboxes
    id: change-types
    attributes:
      label: Tipo de Altera√ß√µes Necess√°rias
      description: Selecione todas as modifica√ß√µes que precisam ser feitas
      options:
        - label: Alterar nome da atividade
        - label: Modificar descri√ß√£o
        - label: Alterar hor√°rios (in√≠cio/fim)
        - label: Mudar dias da semana
        - label: Alterar n√∫mero m√°ximo de participantes
        - label: Trocar categoria
        - label: Alterar professor respons√°vel
        - label: Outras altera√ß√µes

  - type: input
    id: new-name
    attributes:
      label: Novo Nome (se aplic√°vel)
      description: Novo nome para a atividade, se for o caso
      placeholder: ex. Clube de Xadrez Avan√ßado

  - type: textarea
    id: new-description
    attributes:
      label: Nova Descri√ß√£o (se aplic√°vel)
      description: Nova descri√ß√£o para a atividade, se necess√°rio
      placeholder: Descreva a nova vers√£o da atividade...
      rows: 4

  - type: checkboxes
    id: new-schedule-days
    attributes:
      label: Novos Dias da Semana (se aplic√°vel)
      description: Marque os novos dias se for alterar o cronograma
      options:
        - label: Segunda-feira
        - label: Ter√ßa-feira
        - label: Quarta-feira
        - label: Quinta-feira
        - label: Sexta-feira
        - label: S√°bado
        - label: Domingo

  - type: input
    id: new-start-time
    attributes:
      label: Novo Hor√°rio de In√≠cio (se aplic√°vel)
      description: Novo hor√°rio de in√≠cio (formato 24h)
      placeholder: ex. 15:30

  - type: input
    id: new-end-time
    attributes:
      label: Novo Hor√°rio de T√©rmino (se aplic√°vel)
      description: Novo hor√°rio de t√©rmino (formato 24h)
      placeholder: ex. 17:00

  - type: input
    id: new-max-participants
    attributes:
      label: Novo N√∫mero M√°ximo de Participantes (se aplic√°vel)
      description: Nova capacidade de alunos
      placeholder: ex. 30

  - type: dropdown
    id: new-category
    attributes:
      label: Nova Categoria (se aplic√°vel)
      description: Nova categoria para a atividade
      options:
        - (N√£o alterar)
        - Esportes e Recrea√ß√£o
        - Artes e Cultura
        - Ci√™ncias e Tecnologia
        - Idiomas
        - Voluntariado e Servi√ßo Comunit√°rio
        - Lideran√ßa e Desenvolvimento Pessoal
        - Outros

  - type: input
    id: new-teacher
    attributes:
      label: Novo Professor Respons√°vel (se aplic√°vel)
      description: Nome de usu√°rio do novo professor respons√°vel
      placeholder: ex. mchen

  - type: textarea
    id: reason-for-changes
    attributes:
      label: Motivo das Altera√ß√µes
      description: Explique por que essas mudan√ßas s√£o necess√°rias
      placeholder: Explique o contexto e necessidade das altera√ß√µes...
      rows: 3
    validations:
      required: true

  - type: checkboxes
    id: student-impact
    attributes:
      label: Impacto nos Alunos Matriculados
      description: Como tratar alunos j√° inscritos na atividade?
      options:
        - label: Manter todos os alunos j√° inscritos
        - label: Notificar alunos sobre as mudan√ßas
        - label: Permitir que alunos cancelem a inscri√ß√£o devido √†s mudan√ßas
        - label: Outras considera√ß√µes (especificar em observa√ß√µes)

  - type: textarea
    id: additional-considerations
    attributes:
      label: Observa√ß√µes Adicionais
      description: Qualquer outra informa√ß√£o importante sobre as altera√ß√µes
      placeholder: Considera√ß√µes especiais, prazos, equipamentos, etc.
      rows: 3

  - type: dropdown
    id: priority
    attributes:
      label: Prioridade/Urg√™ncia
      description: Quando essas altera√ß√µes precisam ser implementadas?
      options:
        - Baixa - Pode aguardar (mais de 2 semanas)
        - M√©dia - Pr√≥ximas 2 semanas
        - Alta - Esta semana
        - Urgente - Hoje/amanh√£
    validations:
      required: true

  - type: markdown
    attributes:
      value: |
        ## ‚úÖ Crit√©rios de Aceita√ß√£o (preenchido automaticamente)
        
        **Para o agente de codifica√ß√£o:**
        
        - [ ] Localizar atividade existente pelo nome especificado
        - [ ] Validar que atividade existe no sistema
        - [ ] Aplicar apenas as modifica√ß√µes selecionadas
        - [ ] Verificar conflitos de hor√°rio se alterando cronograma
        - [ ] Validar nova capacidade vs alunos j√° inscritos
        - [ ] Verificar se novo professor existe no sistema
        - [ ] Preservar dados n√£o modificados
        - [ ] Manter lista de alunos inscritos (salvo especificado)
        - [ ] Testar modifica√ß√µes funcionam corretamente
        - [ ] Validar que interface reflete as mudan√ßas
        
        ## üîß Dicas de Implementa√ß√£o
        
        **Para o desenvolvedor:**
        1. Use `ActivityUseCase.updateActivity()` ou m√©todos similares
        2. Primeiro busque a atividade por nome via `ActivityRepository`
        3. Aplique mudan√ßas usando setters da entidade `Activity`
        4. Valide restri√ß√µes de dom√≠nio (capacidade, hor√°rios, etc.)
        5. Se alterando capacidade, verifique `getCurrentParticipantCount()`
        6. Para novos professores, valide via `TeacherRepository`
        7. Sincronize dados embarcados se necess√°rio via `ActivitySyncService`
        
        ## üìã Contexto T√©cnico
        
        - M√©todo principal: `Activity.setXXX()` para cada campo alterado
        - Valida√ß√µes: Usar validadores da entidade `Activity`
        - Conflitos: Verificar via `findByDayAndTimeRange()` se alterando hor√°rio
        - Dados embarcados: Sincronizar `TeacherReference` e `CategoryReference`
        - Transa√ß√µes: Usar `@Transactional` para mudan√ßas m√∫ltiplas