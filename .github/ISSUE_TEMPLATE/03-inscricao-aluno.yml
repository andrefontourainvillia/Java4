name: Problemas com Inscri√ß√£o de Alunos
description: Relatar problemas com inscri√ß√µes de alunos em atividades
title: "[INSCRI√á√ÉO ALUNO] "
labels: ["bug", "inscricao-aluno", "copilot-ready"]
assignees: []
body:
  - type: markdown
    attributes:
      value: |
        ## üë• Problemas com Inscri√ß√£o de Alunos
        
        Use este formul√°rio para relatar problemas relacionados √† inscri√ß√£o, cancelamento ou gerenciamento de alunos em atividades extracurriculares.

  - type: dropdown
    id: problem-type
    attributes:
      label: Tipo de Problema
      description: Qual √© o problema principal?
      options:
        - Aluno n√£o consegue se inscrever
        - Aluno n√£o consegue cancelar inscri√ß√£o
        - Aluno aparece inscrito mas n√£o deveria estar
        - Aluno n√£o aparece na lista mas deveria estar
        - Problemas com capacidade/vagas
        - Sistema permite inscri√ß√£o al√©m da capacidade
        - Duplica√ß√£o de inscri√ß√µes
        - Outros problemas de inscri√ß√£o
    validations:
      required: true

  - type: input
    id: activity-name
    attributes:
      label: Nome da Atividade
      description: Nome da atividade onde est√° ocorrendo o problema
      placeholder: ex. Clube de Xadrez, Aula de Programa√ß√£o
    validations:
      required: true

  - type: input
    id: student-email
    attributes:
      label: Email do Aluno (se aplic√°vel)
      description: Email do aluno espec√≠fico envolvido no problema
      placeholder: ex. joao.silva@estudante.mergingtonhigh.edu

  - type: textarea
    id: problem-description
    attributes:
      label: Descri√ß√£o Detalhada do Problema
      description: Descreva exatamente o que est√° acontecendo
      placeholder: |
        Exemplo: "O aluno Jo√£o Silva tentou se inscrever no Clube de Xadrez, mas recebeu erro de 'atividade lotada' mesmo havendo vagas dispon√≠veis. A atividade mostra 15/25 participantes."
      rows: 4
    validations:
      required: true

  - type: textarea
    id: steps-to-reproduce
    attributes:
      label: Passos para Reproduzir o Problema
      description: Liste os passos espec√≠ficos que levam ao problema
      placeholder: |
        1. Aluno acessa a p√°gina da atividade
        2. Clica no bot√£o "Inscrever-se"
        3. Preenche os dados necess√°rios
        4. Clica em confirmar
        5. Sistema mostra erro...
      rows: 4
    validations:
      required: true

  - type: textarea
    id: error-message
    attributes:
      label: Mensagem de Erro (se houver)
      description: Copie exatamente qualquer mensagem de erro que aparece
      placeholder: Cole aqui a mensagem de erro exata...
      rows: 2

  - type: input
    id: current-capacity
    attributes:
      label: Capacidade Atual da Atividade
      description: Quantos alunos est√£o inscritos/total de vagas (ex. 15/25)
      placeholder: ex. 20/30

  - type: dropdown
    id: frequency
    attributes:
      label: Frequ√™ncia do Problema
      description: Com que frequ√™ncia isso acontece?
      options:
        - Acontece sempre
        - Acontece frequentemente
        - Acontece √†s vezes
        - Primeira vez que notei
        - N√£o tenho certeza
    validations:
      required: true

  - type: checkboxes
    id: affected-users
    attributes:
      label: Usu√°rios Afetados
      description: Quem est√° sendo afetado por este problema?
      options:
        - label: Um aluno espec√≠fico
        - label: V√°rios alunos da mesma turma
        - label: Todos os alunos tentando se inscrever
        - label: Apenas alunos novos
        - label: Apenas alunos j√° cadastrados
        - label: N√£o tenho certeza

  - type: dropdown
    id: browser-device
    attributes:
      label: Navegador/Dispositivo (se relevante)
      description: Em qual navegador/dispositivo o problema ocorre?
      options:
        - (N√£o relevante/n√£o sei)
        - Chrome
        - Firefox
        - Safari
        - Edge
        - Celular (iOS)
        - Celular (Android)
        - Tablet
        - Computador

  - type: dropdown
    id: urgency
    attributes:
      label: Urg√™ncia
      description: Qu√£o urgente √© resolver este problema?
      options:
        - Baixa - Pode aguardar resolu√ß√£o
        - M√©dia - Precisa ser resolvido em alguns dias
        - Alta - Est√° impactando v√°rios alunos
        - Cr√≠tica - Sistema inutiliz√°vel para inscri√ß√µes
    validations:
      required: true

  - type: textarea
    id: workaround
    attributes:
      label: Solu√ß√£o Tempor√°ria (se houver)
      description: Existe alguma forma de contornar o problema temporariamente?
      placeholder: Ex. "Fiz a inscri√ß√£o manualmente pelo sistema administrativo"
      rows: 2

  - type: markdown
    attributes:
      value: |
        ## ‚úÖ Crit√©rios de Aceita√ß√£o (preenchido automaticamente)
        
        **Para o agente de codifica√ß√£o:**
        
        - [ ] Reproduzir o problema descrito
        - [ ] Identificar a causa raiz no c√≥digo
        - [ ] Validar capacidade atual vs configurada da atividade
        - [ ] Verificar l√≥gica de inscri√ß√£o em `Activity.addParticipant()`
        - [ ] Checar valida√ß√µes em `StudentRegistrationUseCase`
        - [ ] Corrigir l√≥gica de neg√≥cio problem√°tica
        - [ ] Verificar se email do aluno est√° v√°lido
        - [ ] Testar inscri√ß√£o e cancelamento funcionam
        - [ ] Verificar contadores de capacidade corretos
        - [ ] Validar que duplica√ß√µes n√£o ocorrem
        
        ## üîß Dicas de Implementa√ß√£o
        
        **Para o desenvolvedor:**
        1. Verifique m√©todo `Activity.canAddParticipant()` e `addParticipant()`
        2. Examine `StudentRegistrationUseCase.registerStudentForActivity()`
        3. Valide se `getCurrentParticipantCount()` est√° correto
        4. Cheque valida√ß√£o de email via `Email` value object
        5. Verifique se `participantEmails` list est√° sendo sincronizada
        6. Examine logs para stacktraces de erros
        7. Teste cen√°rios edge (capacidade = 0, emails duplicados, etc.)
        
        ## üìã Contexto T√©cnico
        
        - Entidade principal: `Activity` com lista `participantEmails`
        - Use case: `StudentRegistrationUseCase`
        - Valida√ß√µes: `Email.value()` e `Activity.isParticipantRegistered()`
        - Capacidade: `maxParticipants` vs `participantEmails.size()`
        - Frontend: Formul√°rios em `src/main/resources/static/`
        - Erros: Retornar HTTP 400 com `Map.of("detail", message)`